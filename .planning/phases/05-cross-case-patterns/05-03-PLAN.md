---
phase: 05-cross-case-patterns
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified: []
autonomous: false
requirements: [PATN-01, PATN-02, PATN-03, PATN-04]

must_haves:
  truths:
    - "User visually confirms the Patterns tab works end-to-end"
    - "All four PATN requirements are satisfied in the live application"
  artifacts: []
  key_links: []
---

<objective>
Visual verification checkpoint: user confirms the complete Cross-Case Patterns feature works end-to-end.

Purpose: Phase 5 is the final phase of the project. This checkpoint ensures all PATN requirements are satisfied before marking the phase complete.

Output: User approval or issue list for gap closure
</objective>

<execution_context>
@C:/Users/rafst/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/rafst/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/05-cross-case-patterns/05-01-SUMMARY.md
@.planning/phases/05-cross-case-patterns/05-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 1: Verify Cross-Case Patterns feature end-to-end</name>
  <files>src/components/ftc/FTCPatternsTab.tsx</files>
  <action>
    Human visual verification of the complete Phase 5 Cross-Case Patterns feature.

    What was built:
    - Build pipeline (build-patterns.ts) that detects recurring provision language across consent orders
    - Patterns tab UI with searchable, filterable pattern list
    - Inline-expandable chronological timelines with variant cards
    - Word-level diff highlighting between consecutive provision variants
    - Structural/boilerplate pattern classification with inline badges

    Verification steps:

    1. Start the dev server: `npm run dev`
    2. Navigate to: `http://localhost:5173/FTCAnalytics?tab=patterns`

    PATN-01 — Pattern Detection:
    3. Verify the pattern list shows 100+ named patterns (total count displayed in header)
    4. Verify each pattern shows a case count (3+) and a date span (year range)

    PATN-02 — Pattern Groups:
    5. Click on a substantive pattern (e.g., one with "Security Program" or "Misrepresentations" in the name)
    6. Verify the timeline expands below the row showing variant cards
    7. Each variant card should show: company name, year, docket number, and provision text preview
    8. Click "Show full text" on a variant to see the complete provision language

    PATN-03 — Chronological Timeline:
    9. Verify variants are displayed in chronological order (earliest at top, most recent at bottom)
    10. Verify the vertical timeline line connects the variant cards
    11. Click "Show changes" on a non-first variant to see word-level diff highlighting (green for additions, red strikethrough for removals)
    12. Verify the diff shows meaningful differences between consecutive variants

    PATN-04 — Structural Classification:
    13. Scroll through the pattern list and verify some patterns have a "Structural" badge
    14. Structural patterns should include things like "Compliance Reporting," "Recordkeeping," "Duration of Order," etc.
    15. Verify structural patterns are visible in the list (not hidden), just labeled

    Search and Filter:
    16. Type a search query (e.g., "security") in the search box — list should filter to matching patterns
    17. Select a topic from the topic filter dropdown — list should narrow to patterns with matching enforcement topics
    18. Change sort to "Most Cases" — patterns should reorder by case count descending

    Aesthetic:
    19. Verify the Patterns tab maintains the law-library aesthetic (EB Garamond font, cream/gold/dark-green palette)
    20. Verify the layout is readable and visually consistent with the other tabs

    Resume signal: Type "approved" to complete Phase 5, or describe issues to fix.
  </action>
  <verify>User confirms visual verification by typing "approved" or provides feedback on issues.</verify>
  <done>Human has approved the complete Cross-Case Patterns feature. All Phase 5 requirements (PATN-01, PATN-02, PATN-03, PATN-04) verified by user inspection.</done>
</task>

</tasks>

<verification>
User visually confirms all 4 PATN requirements work correctly in the live application.
</verification>

<success_criteria>
- User approves the visual checkpoint
- All PATN-01 through PATN-04 requirements verified
- Phase 5 is complete and ready for STATE.md update
</success_criteria>

<output>
After completion, create `.planning/phases/05-cross-case-patterns/05-03-SUMMARY.md`
</output>
